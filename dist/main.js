(()=>{"use strict";const t=(()=>{let t=[];if(null===localStorage.getItem("projects"))t=[{title:"Default Project",tasks:[]}];else{const e=JSON.parse(localStorage.getItem("projects"));t=e}class s{constructor(e){this.title=e,this.tasks=[]}}return{projectsList:t,createProject:function(e){const o=new s(e);t.push(o),a.renderProjects(),a.changeLink(t.length-1),localStorage.setItem("projects",JSON.stringify(t))},editProject:function(e,s,o){t[e].title=s,a.renderProjects(),void 0===o?a.changeLink(e):a.changeLink(o),localStorage.setItem("projects",JSON.stringify(t))},removeProject:function(s){t.splice(s,1),e.target.classList.contains("remove")&&e.target.parentElement.parentElement.remove(),a.changeLink("inbox"),localStorage.setItem("projects",JSON.stringify(t))}}})();const s=document.querySelector(".projects-list"),a=function(){!function(){let e=document.querySelector("#modalToDo"),t=document.querySelector(".trigger"),s=document.querySelector(".close-todo");t.onclick=function(){e.classList.toggle("show-modal")},s.onclick=function(){e.classList.toggle("show-modal")}}(),function(){let e=document.querySelector("#modalNewProject"),t=document.querySelector(".addList"),s=document.querySelector(".close-project");t.onclick=function(){e.classList.toggle("show-modal")},s.onclick=function(){e.classList.toggle("show-modal")}}(),window.onload=function(){var e,t;t=(e=["/dist/images/ashim-d-silva-WeYamle9fDM-unsplash.jpg","/dist/images/buzz-andersen-E4944K_4SvI-unsplash.jpg","/dist/images/daniel-tong-dxYdPSuBr-U-unsplash.jpg","/dist/images/stephen-leonardi-eSNjFDbw_i4-unsplash.jpg","/dist/images/maud-bocquillod-bj7EB5my6og-unsplash.jpg","/dist/images/john-fowler-9qgKQewttVs-unsplash.jpg"])[Math.floor(Math.random()*e.length)],document.querySelector("section").style.backgroundImage="url("+t+")"},function(){s.textContent="";for(let e=0;e<t.projectsList.length;e+=1){const a=document.createElement("a");a.classList.add("project"),a.setAttribute("href","#"),a.setAttribute("data-index",e),s.appendChild(a),a.innerHTML=`\n        <p>${t.projectsList[e].title}</p>\n        <a href="#" id="delete-btn" class="delete-btn">\n            <img src="/dist/images/delete-circle-outline.svg" alt="delete">\n        </a>`}}()},o=(()=>{const e=document.getElementById("newProjectForm");class t{constructor(e,t,s,a){this.title=e,this.date=t,this.priority=s,this.done=a}}class s{static getTasks(){var e;return null===localStorage.getItem("tasks")?e=[]:(e=JSON.parse(localStorage.getItem("tasks")),console.log(e)),e}static addTasks(e){var t=s.getTasks();t.push(e),localStorage.setItem("tasks",JSON.stringify(t))}static removeTasksFromStorage(e){var t=s.getTasks();t.forEach(((s,a)=>{s.item===e?t.splice(a,1):localStorage.setItem("tasks",JSON.stringify(t))})),localStorage.setItem("tasks",JSON.stringify(t))}}class a{static displayTasks(){s.getTasks().forEach((e=>a.createTasks(e)))}static createTasks(e){var t=document.getElementById("task"),s=document.createElement("tr");s.innerHTML=`\n            <td>${e.title}</td>\n            <td>${e.date}</td>\n            <td>${e.priority}</td>\n            <td><a href="#" class="doneBtn">${e.done}</a></td>\n            <td><a href="#" class="remove">Remove</a></td>`,t.appendChild(s)}static showAlert(e,t){var s=document.createElement("div");s.className=`${t}`,s.appendChild(document.createTextNode(e));var a=document.getElementById("newProjectForm"),o=document.getElementById("form-label");a.insertBefore(s,o),setTimeout((()=>document.querySelector(".validate").remove()),5e3),setTimeout((()=>document.querySelector(".success").remove()),5e3)}static showTaskRemoved(e,t){var s=document.createElement("div");s.className=`${t}`,s.appendChild(document.createTextNode(e));var a=document.getElementById("task-container"),o=document.querySelector(".todo-container");a.insertBefore(s,o),setTimeout((()=>document.querySelector(".task-removed").remove()),5e3)}static changeDone(e){e.target.classList.contains("doneBtn")&&("true"==e.target.innerHTML?e.target.innerHTML="false":e.target.innerHTML="true")}static removeTask(e){e.target.classList.contains("remove")&&(e.target.parentElement.parentElement.remove(),a.showTaskRemoved("Task Removed","task-removed"))}static clearForm(){document.getElementById("title").value=" ",document.getElementById("date").value=" ",document.getElementById("priority").value=" ",document.getElementById("done").value=!1}}document.addEventListener("DOMContentLoaded",a.displayTasks),e.addEventListener("submit",(e=>{e.preventDefault();var o=document.getElementById("title").value,n=document.getElementById("date").value,r=document.getElementById("priority").value,l=document.getElementById("done").value,c=new Date;if(c.setHours(0,0,0,0),""===o||""===n||""===r)a.showAlert("Please fill in all fields.","validate");else if(new Date(n)<c)a.showAlert("This date has already passed! Please enter another date.","validate");else{var d=new t(o,n,r,l);console.log(d),a.createTasks(d),s.addTasks(d),a.showAlert("Success!","success"),a.clearForm()}})),document.getElementById("task").addEventListener("click",(e=>{a.changeDone(e)})),document.getElementById("task").addEventListener("click",(e=>{a.removeTask(e),s.removeTasksFromStorage()}));var o=document.getElementById("done");return o.addEventListener("change",(e=>{e.target.checked?(o.value=!0,console.log("True!")):(o.value=!1,console.log("False!"))})),{Task:t,Storage:s,EventHandler:a}})();a(),o(),t()})();